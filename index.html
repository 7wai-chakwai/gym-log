<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Template 1: Customizable Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <script>
        // --- CONFIGURATION ---
        const KEYS = {
            LOGS: 'gym_tracker_logs',
            STATS: 'gym_tracker_stats',
            PLAN: 'gym_tracker_plan' // Stores custom exercise names
        };

        // --- 1. CORE FUNCTIONS (LOCAL STORAGE) ---

        function loadStats() {
            // 1. Load Custom Plan Names First
            loadPlan();

            // 2. Load 1RMs
            const savedStats = localStorage.getItem(KEYS.STATS);
            if (savedStats) {
                const data = JSON.parse(savedStats);
                if(data.squat) document.getElementById('squatMax').value = data.squat;
                if(data.bench) document.getElementById('benchMax').value = data.bench;
                if(data.dead) document.getElementById('deadMax').value = data.dead;
                if(data.ohp) document.getElementById('ohpMax').value = data.ohp;
            }
            calculateWeights(false);
            updateSetCounts(); 
        }

        function saveStats() {
            const squat = document.getElementById('squatMax').value;
            const bench = document.getElementById('benchMax').value;
            const dead = document.getElementById('deadMax').value;
            const ohp = document.getElementById('ohpMax').value;

            const stats = { squat, bench, dead, ohp };
            localStorage.setItem(KEYS.STATS, JSON.stringify(stats));
        }

        function getLogs() {
            const logs = localStorage.getItem(KEYS.LOGS);
            return logs ? JSON.parse(logs) : [];
        }

        // --- 2. PLAN CUSTOMIZATION ---

        function toggleEditMode() {
            const isEditing = document.body.classList.contains('editing-mode');
            const editBtn = document.getElementById('editBtn');
            
            if (!isEditing) {
                // Enter Edit Mode
                document.body.classList.add('editing-mode');
                editBtn.textContent = 'üíæ Save Changes';
                editBtn.classList.remove('bg-gray-200', 'text-gray-700');
                editBtn.classList.add('bg-green-600', 'text-white');

                // Turn spans into inputs
                document.querySelectorAll('.exercise-name-span').forEach(span => {
                    const currentName = span.textContent;
                    const input = document.createElement('input');
                    input.type = 'text';
                    input.value = currentName;
                    input.className = 'edit-name-input border border-blue-400 rounded px-1 w-full text-sm font-bold text-blue-900';
                    span.replaceWith(input);
                });
            } else {
                // Save Changes
                saveCustomPlan();
                document.body.classList.remove('editing-mode');
                editBtn.textContent = '‚úèÔ∏è Edit Names';
                editBtn.classList.add('bg-gray-200', 'text-gray-700');
                editBtn.classList.remove('bg-green-600', 'text-white');
            }
        }

        function saveCustomPlan() {
            const planMap = {};
            
            document.querySelectorAll('.exercise-row').forEach(row => {
                const id = row.dataset.id; // Unique ID like "d1-e1"
                const input = row.querySelector('.edit-name-input');
                
                if (input && id) {
                    const newName = input.value.trim();
                    planMap[id] = newName;
                    
                    // Convert Input back to Span for UI
                    const span = document.createElement('span');
                    span.className = 'exercise-name-span clickable-exercise font-bold text-blue-700 cursor-pointer hover:underline';
                    span.textContent = newName;
                    span.onclick = function() { showGraph(newName); }; // Re-attach click handler
                    
                    input.replaceWith(span);
                    
                    // Update data-name attribute for logging
                    row.dataset.name = newName;
                }
            });

            localStorage.setItem(KEYS.PLAN, JSON.stringify(planMap));
            showToast("‚úÖ Custom plan saved!");
            
            // Refresh counts/graphs in case names changed
            updateSetCounts();
        }

        function loadPlan() {
            const savedPlan = localStorage.getItem(KEYS.PLAN);
            if (!savedPlan) return;

            const planMap = JSON.parse(savedPlan);
            
            document.querySelectorAll('.exercise-row').forEach(row => {
                const id = row.dataset.id;
                if (planMap[id]) {
                    const newName = planMap[id];
                    // Update the visible text
                    const nameSpan = row.querySelector('.exercise-name-span');
                    if(nameSpan) {
                        nameSpan.textContent = newName;
                        nameSpan.onclick = function() { showGraph(newName); };
                    }
                    // Update the logic attribute
                    row.dataset.name = newName;
                }
            });
        }

        // --- 3. EXPORT FOR AI ---

        function exportForAI() {
            const logs = getLogs();
            const stats = localStorage.getItem(KEYS.STATS) || "{}";
            
            if (logs.length === 0) {
                showToast("‚ö†Ô∏è No data to export yet.");
                return;
            }

            // Create a prompt-ready format
            const exportObj = {
                current_1rms: JSON.parse(stats),
                workout_history: logs
            };

            const textToCopy = `I want you to analyze my gym progress and suggest improvements. Here is my workout data in JSON format including my estimated 1RMs and detailed log history:\n\n${JSON.stringify(exportObj, null, 2)}`;

            // Copy to clipboard
            const textarea = document.createElement('textarea');
            textarea.value = textToCopy;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand('copy');
            document.body.removeChild(textarea);

            showToast("üìã Copied! Paste into ChatGPT/Gemini.");
        }

        // --- 4. USER ACTIONS (LOGGING) ---

        function saveSet(btn) {
            const row = btn.closest('.exercise-row');
            const name = row.dataset.name;
            const weightInput = row.querySelector('.log-weight');
            const repsInput = row.querySelector('.log-reps');
            const rpeInput = row.querySelector('.log-rpe');

            const weight = weightInput.value;
            const reps = repsInput.value;
            const rpe = rpeInput ? rpeInput.value : '';

            if (weight && reps) {
                const newEntry = {
                    date: new Date().toISOString().split('T')[0],
                    exercise: name,
                    weight: parseFloat(weight),
                    reps: parseInt(reps),
                    rpe: rpe || '-',
                    timestamp: Date.now()
                };

                const currentLogs = getLogs();
                currentLogs.push(newEntry);
                localStorage.setItem(KEYS.LOGS, JSON.stringify(currentLogs));

                showToast(`‚úÖ Saved set for ${name}`);
                if(rpeInput) rpeInput.value = ''; 
                updateSetCounts();
            } else {
                showToast('‚ö†Ô∏è Enter Weight & Reps first.');
            }
        }

        function updateSetCounts() {
            const logs = getLogs();
            const today = new Date().toISOString().split('T')[0];
            
            const rows = document.querySelectorAll('.exercise-row');
            rows.forEach(row => {
                const name = row.dataset.name;
                const count = logs.filter(l => l.exercise === name && l.date === today).length;
                
                const counterSpan = row.querySelector('.set-count');
                if (counterSpan) {
                    counterSpan.textContent = count;
                    if (count > 0) {
                        counterSpan.parentElement.classList.add('text-green-600');
                        counterSpan.parentElement.classList.remove('text-gray-400');
                    } else {
                        counterSpan.parentElement.classList.remove('text-green-600');
                        counterSpan.parentElement.classList.add('text-gray-400');
                    }
                }
            });
        }

        function calculateWeights(shouldSave = true) {
            const squatMax = parseFloat(document.getElementById('squatMax').value) || 0;
            const benchMax = parseFloat(document.getElementById('benchMax').value) || 0;
            const deadMax = parseFloat(document.getElementById('deadMax').value) || 0;
            const ohpMax = parseFloat(document.getElementById('ohpMax').value) || 0;

            const maxes = { 'squat': squatMax, 'bench': benchMax, 'dead': deadMax, 'ohp': ohpMax };
            
            const targets = document.querySelectorAll('span[data-lift], div[data-lift]');
            targets.forEach(target => {
                const lift = target.getAttribute('data-lift');
                const pct = parseFloat(target.getAttribute('data-pct'));
                
                if (maxes[lift] > 0) {
                    let weight = maxes[lift] * pct;
                    weight = Math.round(weight / 2.5) * 2.5; 
                    target.textContent = weight + " kg";
                } else {
                    target.textContent = "-";
                }
            });

            if (shouldSave) saveStats();
        }

        function predict1RM(exerciseName, inputId) {
            const logs = getLogs().filter(l => l.exercise === exerciseName);
            if (logs.length === 0) { showToast(`No history found for ${exerciseName}.`); return; }

            let maxEst1RM = 0;
            logs.forEach(l => {
                const est = l.weight * (1 + l.reps / 30);
                if (est > maxEst1RM) maxEst1RM = est;
            });

            const roundedMax = Math.round(maxEst1RM);
            document.getElementById(inputId).value = roundedMax;
            calculateWeights(true);
            showToast(`‚ú® Updated 1RM to ${roundedMax}kg!`);
        }

        function clearData() {
            if(confirm("Are you sure? This will wipe all data.")) {
                localStorage.clear(); 
                location.reload();
            }
        }

        let chartInstance = null;
        function showGraph(exerciseName) {
            // Handle aliases if needed, though with custom names we rely on direct match
            let searchName = exerciseName;
            if(exerciseName === 'Deadlift (Back-off)') searchName = 'Deadlift';

            const logs = getLogs().filter(l => l.exercise === searchName);
            
            if (logs.length === 0) { showToast(`No history for ${exerciseName} yet.`); return; }

            logs.sort((a, b) => new Date(a.date) - new Date(b.date) || a.timestamp - b.timestamp);
            const labels = logs.map(l => l.date);
            const dataPoints = logs.map(l => Math.round(l.weight * (1 + l.reps / 30)));

            document.getElementById('graphTitle').textContent = `${searchName} (Est. 1RM)`;
            document.getElementById('graphModal').classList.remove('hidden');

            const ctx = document.getElementById('progressChart').getContext('2d');
            if (chartInstance) chartInstance.destroy();

            chartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Est. 1RM (kg)',
                        data: dataPoints,
                        borderColor: '#2563EB',
                        backgroundColor: 'rgba(37, 99, 235, 0.1)',
                        tension: 0.3,
                        fill: true
                    }]
                },
                options: { responsive: true, maintainAspectRatio: false, scales: { y: { beginAtZero: false } } }
            });
        }

        function closeGraph() { document.getElementById('graphModal').classList.add('hidden'); }

        function showToast(msg) {
            const toast = document.getElementById('toast');
            toast.textContent = msg;
            toast.classList.remove('translate-y-20', 'opacity-0');
            setTimeout(() => { toast.classList.add('translate-y-20', 'opacity-0'); }, 3000);
        }

        window.onload = loadStats;
    </script>
    
    <style>
        ::-webkit-scrollbar { width: 0px; background: transparent; }
        @media print {
            .no-print { display: none !important; }
            body { background: white; color: black; }
            input { border: none; border-bottom: 1px solid #ccc; background: transparent; }
            .card { break-inside: avoid; border: 1px solid #ccc; shadow: none; }
        }
        .clickable-exercise:hover { color: #2563EB; }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 font-sans p-2 md:p-6 pb-20">

    <div class="max-w-5xl mx-auto">
        
        <!-- Header -->
        <div class="bg-white rounded-lg shadow-md p-4 md:p-6 mb-6 no-print">
            <div class="flex justify-between items-center mb-4 flex-wrap gap-2">
                <h1 class="text-2xl md:text-3xl font-bold text-blue-900">Gym Log</h1>
                <div class="flex gap-2">
                    <button id="editBtn" onclick="toggleEditMode()" class="bg-gray-200 hover:bg-gray-300 text-gray-700 text-xs md:text-sm font-bold py-2 px-3 rounded">
                        ‚úèÔ∏è Edit Names
                    </button>
                    <button onclick="exportForAI()" class="bg-purple-100 hover:bg-purple-200 text-purple-700 text-xs md:text-sm font-bold py-2 px-3 rounded">
                        ü§ñ Export Data
                    </button>
                    <button onclick="clearData()" class="text-xs text-red-400 hover:text-red-600 underline ml-2">Reset</button>
                </div>
            </div>
            
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-4">
                <!-- 1RM Inputs -->
                <div class="relative group">
                    <label class="block text-xs font-semibold text-gray-500 uppercase">Squat 1RM</label>
                    <div class="flex items-center mt-1">
                        <input type="number" id="squatMax" value="0" class="w-full p-2 border border-gray-300 rounded-l focus:ring-2 focus:ring-blue-500" oninput="calculateWeights()">
                        <button onclick="predict1RM('Squat', 'squatMax')" class="bg-purple-100 hover:bg-purple-200 text-purple-700 p-2 rounded-r border border-l-0 border-gray-300 text-sm">üîÆ</button>
                    </div>
                </div>
                <div class="relative group">
                    <label class="block text-xs font-semibold text-gray-500 uppercase">Bench 1RM</label>
                    <div class="flex items-center mt-1">
                        <input type="number" id="benchMax" value="0" class="w-full p-2 border border-gray-300 rounded-l focus:ring-2 focus:ring-blue-500" oninput="calculateWeights()">
                        <button onclick="predict1RM('Bench Press', 'benchMax')" class="bg-purple-100 hover:bg-purple-200 text-purple-700 p-2 rounded-r border border-l-0 border-gray-300 text-sm">üîÆ</button>
                    </div>
                </div>
                <div class="relative group">
                    <label class="block text-xs font-semibold text-gray-500 uppercase">Deadlift 1RM</label>
                    <div class="flex items-center mt-1">
                        <input type="number" id="deadMax" value="0" class="w-full p-2 border border-gray-300 rounded-l focus:ring-2 focus:ring-blue-500" oninput="calculateWeights()">
                        <button onclick="predict1RM('Deadlift', 'deadMax')" class="bg-purple-100 hover:bg-purple-200 text-purple-700 p-2 rounded-r border border-l-0 border-gray-300 text-sm">üîÆ</button>
                    </div>
                </div>
                <div class="relative group">
                    <label class="block text-xs font-semibold text-gray-500 uppercase">OHP 1RM</label>
                    <div class="flex items-center mt-1">
                        <input type="number" id="ohpMax" value="0" class="w-full p-2 border border-gray-300 rounded-l focus:ring-2 focus:ring-blue-500" oninput="calculateWeights()">
                        <button onclick="predict1RM('Overhead Press', 'ohpMax')" class="bg-purple-100 hover:bg-purple-200 text-purple-700 p-2 rounded-r border border-l-0 border-gray-300 text-sm">üîÆ</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- WORKOUTS GRID -->
        <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">

            <!-- DAY A -->
            <div class="card bg-white rounded-lg shadow-md overflow-hidden">
                <div class="bg-blue-800 text-white p-3 flex justify-between items-center">
                    <h2 class="font-bold text-lg">Day A: Upper</h2>
                    <span class="text-xs bg-blue-700 px-2 py-1 rounded">Bench Focus</span>
                </div>
                <div class="p-2 overflow-x-auto">
                    <table class="w-full text-sm text-left">
                        <thead class="bg-gray-50 text-gray-600 font-medium border-b">
                            <tr>
                                <th class="py-2 px-1 w-32">Exercise</th>
                                <th class="py-2 px-1 w-24">Goal</th>
                                <th class="py-2 px-1">Log</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-100">
                            <!-- T1 -->
                            <tr class="exercise-row" data-id="a-1" data-name="Bench Press">
                                <td class="py-3 px-1">
                                    <span class="exercise-name-span clickable-exercise font-bold text-blue-700 cursor-pointer hover:underline" onclick="showGraph('Bench Press')">Bench Press</span>
                                </td>
                                <td class="px-1 text-xs">
                                    <div class="font-bold">5 x 3</div>
                                    <div class="text-blue-600 font-bold" data-lift="bench" data-pct="0.85">-</div>
                                    <div class="text-gray-500 text-[10px]">85% 1RM / Rest: 3-5m</div>
                                </td>
                                <td class="px-1 py-2">
                                    <div class="flex gap-1 mb-1">
                                        <input type="number" class="log-weight w-12 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="Kg">
                                        <input type="number" class="log-reps w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" value="3">
                                        <input type="number" class="log-rpe w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="RPE">
                                        <button onclick="saveSet(this)" class="bg-blue-600 text-white rounded px-2 shadow hover:bg-blue-700">‚úì</button>
                                    </div>
                                    <div class="text-[10px] text-gray-400">Today: <span class="set-count font-bold">0</span> sets</div>
                                </td>
                            </tr>
                            <!-- T2 -->
                            <tr class="exercise-row" data-id="a-2" data-name="Overhead Press">
                                <td class="py-3 px-1">
                                    <span class="exercise-name-span clickable-exercise font-medium cursor-pointer hover:underline" onclick="showGraph('Overhead Press')">Overhead Press</span>
                                </td>
                                <td class="px-1 text-xs">
                                    <div class="font-bold">3 x 8-10</div>
                                    <div class="text-blue-600 font-bold" data-lift="ohp" data-pct="0.70">-</div>
                                    <div class="text-gray-500 text-[10px]">70% 1RM / Rest: 2-3m</div>
                                </td>
                                <td class="px-1 py-2">
                                    <div class="flex gap-1 mb-1">
                                        <input type="number" class="log-weight w-12 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="Kg">
                                        <input type="number" class="log-reps w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" value="10">
                                        <input type="number" class="log-rpe w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="RPE">
                                        <button onclick="saveSet(this)" class="bg-blue-600 text-white rounded px-2 shadow hover:bg-blue-700">‚úì</button>
                                    </div>
                                    <div class="text-[10px] text-gray-400">Today: <span class="set-count font-bold">0</span> sets</div>
                                </td>
                            </tr>
                            <!-- T3 -->
                            <tr class="exercise-row" data-id="a-3" data-name="Barbell Row">
                                <td class="py-3 px-1"><span class="exercise-name-span clickable-exercise cursor-pointer hover:underline" onclick="showGraph('Barbell Row')">Barbell Row</span></td>
                                <td class="px-1 text-xs">
                                    3x12 (RPE8)
                                    <div class="text-gray-500 text-[10px]">Rest: 60-90s</div>
                                </td>
                                <td class="px-1 py-2">
                                    <div class="flex gap-1 mb-1">
                                        <input type="number" class="log-weight w-12 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="Kg">
                                        <input type="number" class="log-reps w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" value="12">
                                        <input type="number" class="log-rpe w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="RPE">
                                        <button onclick="saveSet(this)" class="bg-blue-600 text-white rounded px-2 shadow hover:bg-blue-700">‚úì</button>
                                    </div>
                                    <div class="text-[10px] text-gray-400">Today: <span class="set-count font-bold">0</span> sets</div>
                                </td>
                            </tr>
                            <tr class="exercise-row" data-id="a-4" data-name="Lat Pulldown">
                                <td class="py-3 px-1"><span class="exercise-name-span clickable-exercise cursor-pointer hover:underline" onclick="showGraph('Lat Pulldown')">Lat Pulldown</span></td>
                                <td class="px-1 text-xs">
                                    3x12 (RPE9)
                                    <div class="text-gray-500 text-[10px]">Rest: 60-90s</div>
                                </td>
                                <td class="px-1 py-2">
                                    <div class="flex gap-1 mb-1">
                                        <input type="number" class="log-weight w-12 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="Kg">
                                        <input type="number" class="log-reps w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" value="12">
                                        <input type="number" class="log-rpe w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="RPE">
                                        <button onclick="saveSet(this)" class="bg-blue-600 text-white rounded px-2 shadow hover:bg-blue-700">‚úì</button>
                                    </div>
                                    <div class="text-[10px] text-gray-400">Today: <span class="set-count font-bold">0</span> sets</div>
                                </td>
                            </tr>
                            <tr class="exercise-row" data-id="a-5" data-name="Tricep Pushdown">
                                <td class="py-3 px-1"><span class="exercise-name-span clickable-exercise cursor-pointer hover:underline" onclick="showGraph('Tricep Pushdown')">Tricep Pushdown</span></td>
                                <td class="px-1 text-xs">
                                    3x15 (RPE9)
                                    <div class="text-gray-500 text-[10px]">Rest: 60s</div>
                                </td>
                                <td class="px-1 py-2">
                                    <div class="flex gap-1 mb-1">
                                        <input type="number" class="log-weight w-12 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="Kg">
                                        <input type="number" class="log-reps w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" value="15">
                                        <input type="number" class="log-rpe w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="RPE">
                                        <button onclick="saveSet(this)" class="bg-blue-600 text-white rounded px-2 shadow hover:bg-blue-700">‚úì</button>
                                    </div>
                                    <div class="text-[10px] text-gray-400">Today: <span class="set-count font-bold">0</span> sets</div>
                                </td>
                            </tr>
                            <tr class="exercise-row" data-id="a-6" data-name="Lateral Raise">
                                <td class="py-3 px-1"><span class="exercise-name-span clickable-exercise cursor-pointer hover:underline" onclick="showGraph('Lateral Raise')">Lateral Raise</span></td>
                                <td class="px-1 text-xs">
                                    3x15 (RPE9)
                                    <div class="text-gray-500 text-[10px]">Rest: 60s</div>
                                </td>
                                <td class="px-1 py-2">
                                    <div class="flex gap-1 mb-1">
                                        <input type="number" class="log-weight w-12 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="Kg">
                                        <input type="number" class="log-reps w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" value="15">
                                        <input type="number" class="log-rpe w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="RPE">
                                        <button onclick="saveSet(this)" class="bg-blue-600 text-white rounded px-2 shadow hover:bg-blue-700">‚úì</button>
                                    </div>
                                    <div class="text-[10px] text-gray-400">Today: <span class="set-count font-bold">0</span> sets</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- DAY B -->
            <div class="card bg-white rounded-lg shadow-md overflow-hidden">
                <div class="bg-blue-800 text-white p-3 flex justify-between items-center">
                    <h2 class="font-bold text-lg">Day B: Lower</h2>
                    <span class="text-xs bg-blue-700 px-2 py-1 rounded">Squat Focus</span>
                </div>
                <div class="p-2 overflow-x-auto">
                    <table class="w-full text-sm text-left">
                        <thead class="bg-gray-50 text-gray-600 font-medium border-b">
                            <tr>
                                <th class="py-2 px-1 w-32">Exercise</th>
                                <th class="py-2 px-1 w-24">Goal</th>
                                <th class="py-2 px-1">Log</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-100">
                            <!-- T1 -->
                            <tr class="exercise-row" data-id="b-1" data-name="Squat">
                                <td class="py-3 px-1">
                                    <span class="exercise-name-span clickable-exercise font-bold text-blue-700 cursor-pointer hover:underline" onclick="showGraph('Squat')">Squat</span>
                                </td>
                                <td class="px-1 text-xs">
                                    <div class="font-bold">5 x 3</div>
                                    <div class="text-blue-600 font-bold" data-lift="squat" data-pct="0.85">-</div>
                                    <div class="text-gray-500 text-[10px]">85% 1RM / Rest: 3-5m</div>
                                </td>
                                <td class="px-1 py-2">
                                    <div class="flex gap-1 mb-1">
                                        <input type="number" class="log-weight w-12 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="Kg">
                                        <input type="number" class="log-reps w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" value="3">
                                        <input type="number" class="log-rpe w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="RPE">
                                        <button onclick="saveSet(this)" class="bg-blue-600 text-white rounded px-2 shadow hover:bg-blue-700">‚úì</button>
                                    </div>
                                    <div class="text-[10px] text-gray-400">Today: <span class="set-count font-bold">0</span> sets</div>
                                </td>
                            </tr>
                            <!-- T2 -->
                            <tr class="exercise-row" data-id="b-2" data-name="RDL">
                                <td class="py-3 px-1">
                                    <span class="exercise-name-span clickable-exercise font-medium cursor-pointer hover:underline" onclick="showGraph('RDL')">RDL</span>
                                </td>
                                <td class="px-1 text-xs">
                                    <div class="font-bold">3 x 10</div>
                                    <div class="text-blue-600 font-bold" data-lift="squat" data-pct="0.60">-</div>
                                    <div class="text-gray-500 text-[10px]">60% 1RM / Rest: 2-3m</div>
                                </td>
                                <td class="px-1 py-2">
                                    <div class="flex gap-1 mb-1">
                                        <input type="number" class="log-weight w-12 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="Kg">
                                        <input type="number" class="log-reps w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" value="10">
                                        <input type="number" class="log-rpe w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="RPE">
                                        <button onclick="saveSet(this)" class="bg-blue-600 text-white rounded px-2 shadow hover:bg-blue-700">‚úì</button>
                                    </div>
                                    <div class="text-[10px] text-gray-400">Today: <span class="set-count font-bold">0</span> sets</div>
                                </td>
                            </tr>
                            <!-- T3 -->
                            <tr class="exercise-row" data-id="b-3" data-name="Leg Press">
                                <td class="py-3 px-1"><span class="exercise-name-span clickable-exercise cursor-pointer hover:underline" onclick="showGraph('Leg Press')">Leg Press</span></td>
                                <td class="px-1 text-xs">
                                    3x12 (RPE9)
                                    <div class="text-gray-500 text-[10px]">Rest: 60-90s</div>
                                </td>
                                <td class="px-1 py-2">
                                    <div class="flex gap-1 mb-1">
                                        <input type="number" class="log-weight w-12 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="Kg">
                                        <input type="number" class="log-reps w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" value="12">
                                        <input type="number" class="log-rpe w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="RPE">
                                        <button onclick="saveSet(this)" class="bg-blue-600 text-white rounded px-2 shadow hover:bg-blue-700">‚úì</button>
                                    </div>
                                    <div class="text-[10px] text-gray-400">Today: <span class="set-count font-bold">0</span> sets</div>
                                </td>
                            </tr>
                            <tr class="exercise-row" data-id="b-4" data-name="Leg Curl">
                                <td class="py-3 px-1"><span class="exercise-name-span clickable-exercise cursor-pointer hover:underline" onclick="showGraph('Leg Curl')">Leg Curl</span></td>
                                <td class="px-1 text-xs">
                                    3x15 (RPE9)
                                    <div class="text-gray-500 text-[10px]">Rest: 60s</div>
                                </td>
                                <td class="px-1 py-2">
                                    <div class="flex gap-1 mb-1">
                                        <input type="number" class="log-weight w-12 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="Kg">
                                        <input type="number" class="log-reps w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" value="15">
                                        <input type="number" class="log-rpe w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="RPE">
                                        <button onclick="saveSet(this)" class="bg-blue-600 text-white rounded px-2 shadow hover:bg-blue-700">‚úì</button>
                                    </div>
                                    <div class="text-[10px] text-gray-400">Today: <span class="set-count font-bold">0</span> sets</div>
                                </td>
                            </tr>
                            <tr class="exercise-row" data-id="b-5" data-name="Plank / Abs">
                                <td class="py-3 px-1"><span class="exercise-name-span clickable-exercise cursor-pointer hover:underline" onclick="showGraph('Plank / Abs')">Plank / Abs</span></td>
                                <td class="px-1 text-xs">
                                    3 Sets (RPE9)
                                    <div class="text-gray-500 text-[10px]">Rest: 60s</div>
                                </td>
                                <td class="px-1 py-2">
                                    <div class="flex gap-1 mb-1">
                                        <input type="number" class="log-weight w-12 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="Kg">
                                        <input type="number" class="log-reps w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center">
                                        <input type="number" class="log-rpe w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="RPE">
                                        <button onclick="saveSet(this)" class="bg-blue-600 text-white rounded px-2 shadow hover:bg-blue-700">‚úì</button>
                                    </div>
                                    <div class="text-[10px] text-gray-400">Today: <span class="set-count font-bold">0</span> sets</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- DAY C -->
            <div class="card bg-white rounded-lg shadow-md overflow-hidden">
                <div class="bg-blue-800 text-white p-3 flex justify-between items-center">
                    <h2 class="font-bold text-lg">Day C: Upper</h2>
                    <span class="text-xs bg-blue-700 px-2 py-1 rounded">OHP Focus</span>
                </div>
                <div class="p-2 overflow-x-auto">
                    <table class="w-full text-sm text-left">
                        <thead class="bg-gray-50 text-gray-600 font-medium border-b">
                            <tr>
                                <th class="py-2 px-1 w-32">Exercise</th>
                                <th class="py-2 px-1 w-24">Goal</th>
                                <th class="py-2 px-1">Log</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-100">
                            <!-- T1 -->
                            <tr class="exercise-row" data-id="c-1" data-name="Overhead Press">
                                <td class="py-3 px-1">
                                    <span class="exercise-name-span clickable-exercise font-bold text-blue-700 cursor-pointer hover:underline" onclick="showGraph('Overhead Press')">Overhead Press</span>
                                </td>
                                <td class="px-1 text-xs">
                                    <div class="font-bold">5 x 3</div>
                                    <div class="text-blue-600 font-bold" data-lift="ohp" data-pct="0.85">-</div>
                                    <div class="text-gray-500 text-[10px]">85% 1RM / Rest: 3-5m</div>
                                </td>
                                <td class="px-1 py-2">
                                    <div class="flex gap-1 mb-1">
                                        <input type="number" class="log-weight w-12 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="Kg">
                                        <input type="number" class="log-reps w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" value="3">
                                        <input type="number" class="log-rpe w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="RPE">
                                        <button onclick="saveSet(this)" class="bg-blue-600 text-white rounded px-2 shadow hover:bg-blue-700">‚úì</button>
                                    </div>
                                    <div class="text-[10px] text-gray-400">Today: <span class="set-count font-bold">0</span> sets</div>
                                </td>
                            </tr>
                            <!-- T2 -->
                            <tr class="exercise-row" data-id="c-2" data-name="Bench Press">
                                <td class="py-3 px-1">
                                    <span class="exercise-name-span clickable-exercise font-medium cursor-pointer hover:underline" onclick="showGraph('Bench Press')">Bench Press</span>
                                </td>
                                <td class="px-1 text-xs">
                                    <div class="font-bold">3 x 10</div>
                                    <div class="text-blue-600 font-bold" data-lift="bench" data-pct="0.70">-</div>
                                    <div class="text-gray-500 text-[10px]">70% 1RM / Rest: 2-3m</div>
                                </td>
                                <td class="px-1 py-2">
                                    <div class="flex gap-1 mb-1">
                                        <input type="number" class="log-weight w-12 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="Kg">
                                        <input type="number" class="log-reps w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" value="10">
                                        <input type="number" class="log-rpe w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="RPE">
                                        <button onclick="saveSet(this)" class="bg-blue-600 text-white rounded px-2 shadow hover:bg-blue-700">‚úì</button>
                                    </div>
                                    <div class="text-[10px] text-gray-400">Today: <span class="set-count font-bold">0</span> sets</div>
                                </td>
                            </tr>
                            <!-- T3 -->
                            <tr class="exercise-row" data-id="c-3" data-name="Pull Ups">
                                <td class="py-3 px-1"><span class="exercise-name-span clickable-exercise cursor-pointer hover:underline" onclick="showGraph('Pull Ups')">Pull Ups</span></td>
                                <td class="px-1 text-xs">
                                    3 x Max
                                    <div class="text-gray-500 text-[10px]">Rest: 60-90s</div>
                                </td>
                                <td class="px-1 py-2">
                                    <div class="flex gap-1 mb-1">
                                        <input type="number" class="log-weight w-12 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="BW">
                                        <input type="number" class="log-reps w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center">
                                        <input type="number" class="log-rpe w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="RPE">
                                        <button onclick="saveSet(this)" class="bg-blue-600 text-white rounded px-2 shadow hover:bg-blue-700">‚úì</button>
                                    </div>
                                    <div class="text-[10px] text-gray-400">Today: <span class="set-count font-bold">0</span> sets</div>
                                </td>
                            </tr>
                            <tr class="exercise-row" data-id="c-4" data-name="Cable Row">
                                <td class="py-3 px-1"><span class="exercise-name-span clickable-exercise cursor-pointer hover:underline" onclick="showGraph('Cable Row')">Cable Row</span></td>
                                <td class="px-1 text-xs">
                                    3x12 (RPE9)
                                    <div class="text-gray-500 text-[10px]">Rest: 60-90s</div>
                                </td>
                                <td class="px-1 py-2">
                                    <div class="flex gap-1 mb-1">
                                        <input type="number" class="log-weight w-12 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="Kg">
                                        <input type="number" class="log-reps w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" value="12">
                                        <input type="number" class="log-rpe w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="RPE">
                                        <button onclick="saveSet(this)" class="bg-blue-600 text-white rounded px-2 shadow hover:bg-blue-700">‚úì</button>
                                    </div>
                                    <div class="text-[10px] text-gray-400">Today: <span class="set-count font-bold">0</span> sets</div>
                                </td>
                            </tr>
                            <tr class="exercise-row" data-id="c-5" data-name="Bicep Curls">
                                <td class="py-3 px-1"><span class="exercise-name-span clickable-exercise cursor-pointer hover:underline" onclick="showGraph('Bicep Curls')">Bicep Curls</span></td>
                                <td class="px-1 text-xs">
                                    3x12 (RPE9)
                                    <div class="text-gray-500 text-[10px]">Rest: 60s</div>
                                </td>
                                <td class="px-1 py-2">
                                    <div class="flex gap-1 mb-1">
                                        <input type="number" class="log-weight w-12 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="Kg">
                                        <input type="number" class="log-reps w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" value="12">
                                        <input type="number" class="log-rpe w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="RPE">
                                        <button onclick="saveSet(this)" class="bg-blue-600 text-white rounded px-2 shadow hover:bg-blue-700">‚úì</button>
                                    </div>
                                    <div class="text-[10px] text-gray-400">Today: <span class="set-count font-bold">0</span> sets</div>
                                </td>
                            </tr>
                            <tr class="exercise-row" data-id="c-6" data-name="Face Pulls">
                                <td class="py-3 px-1"><span class="exercise-name-span clickable-exercise cursor-pointer hover:underline" onclick="showGraph('Face Pulls')">Face Pulls</span></td>
                                <td class="px-1 text-xs">
                                    3x15 (RPE8)
                                    <div class="text-gray-500 text-[10px]">Rest: 60s</div>
                                </td>
                                <td class="px-1 py-2">
                                    <div class="flex gap-1 mb-1">
                                        <input type="number" class="log-weight w-12 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="Kg">
                                        <input type="number" class="log-reps w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" value="15">
                                        <input type="number" class="log-rpe w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="RPE">
                                        <button onclick="saveSet(this)" class="bg-blue-600 text-white rounded px-2 shadow hover:bg-blue-700">‚úì</button>
                                    </div>
                                    <div class="text-[10px] text-gray-400">Today: <span class="set-count font-bold">0</span> sets</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- DAY D -->
            <div class="card bg-white rounded-lg shadow-md overflow-hidden">
                <div class="bg-blue-800 text-white p-3 flex justify-between items-center">
                    <h2 class="font-bold text-lg">Day D: Lower</h2>
                    <span class="text-xs bg-blue-700 px-2 py-1 rounded">Deadlift Focus</span>
                </div>
                <div class="p-2 overflow-x-auto">
                    <table class="w-full text-sm text-left">
                        <thead class="bg-gray-50 text-gray-600 font-medium border-b">
                            <tr>
                                <th class="py-2 px-1 w-32">Exercise</th>
                                <th class="py-2 px-1 w-24">Goal</th>
                                <th class="py-2 px-1">Log</th>
                            </tr>
                        </thead>
                        <tbody class="divide-y divide-gray-100">
                            <!-- T1 -->
                            <tr class="exercise-row" data-id="d-1" data-name="Deadlift">
                                <td class="py-3 px-1">
                                    <span class="exercise-name-span clickable-exercise font-bold text-blue-700 cursor-pointer hover:underline" onclick="showGraph('Deadlift')">Deadlift</span>
                                </td>
                                <td class="px-1 text-xs">
                                    <div class="font-bold">1 x 5</div>
                                    <div class="text-blue-600 font-bold" data-lift="dead" data-pct="0.85">-</div>
                                    <div class="text-gray-500 text-[10px]">85% 1RM / Rest: 3-5m</div>
                                </td>
                                <td class="px-1 py-2">
                                    <div class="flex gap-1 mb-1">
                                        <input type="number" class="log-weight w-12 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="Kg">
                                        <input type="number" class="log-reps w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" value="5">
                                        <input type="number" class="log-rpe w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="RPE">
                                        <button onclick="saveSet(this)" class="bg-blue-600 text-white rounded px-2 shadow hover:bg-blue-700">‚úì</button>
                                    </div>
                                    <div class="text-[10px] text-gray-400">Today: <span class="set-count font-bold">0</span> sets</div>
                                </td>
                            </tr>
                            <!-- T1 Backoff -->
                            <tr class="exercise-row" data-id="d-2" data-name="Deadlift (Back-off)">
                                <td class="py-3 px-1">
                                    <span class="exercise-name-span clickable-exercise font-bold text-blue-700 cursor-pointer hover:underline" onclick="showGraph('Deadlift')">DL Back-off</span>
                                </td>
                                <td class="px-1 text-xs">
                                    <div class="font-bold">2 x 3</div>
                                    <div class="text-blue-600 font-bold" data-lift="dead" data-pct="0.80">-</div>
                                    <div class="text-gray-500 text-[10px]">80% 1RM / Rest: 2-3m</div>
                                </td>
                                <td class="px-1 py-2">
                                    <div class="flex gap-1 mb-1">
                                        <input type="number" class="log-weight w-12 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="Kg">
                                        <input type="number" class="log-reps w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" value="3">
                                        <input type="number" class="log-rpe w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="RPE">
                                        <button onclick="saveSet(this)" class="bg-blue-600 text-white rounded px-2 shadow hover:bg-blue-700">‚úì</button>
                                    </div>
                                    <div class="text-[10px] text-gray-400">Today: <span class="set-count font-bold">0</span> sets</div>
                                </td>
                            </tr>
                            <!-- T2 -->
                            <tr class="exercise-row" data-id="d-3" data-name="Front Squat">
                                <td class="py-3 px-1">
                                    <span class="exercise-name-span clickable-exercise font-medium cursor-pointer hover:underline" onclick="showGraph('Front Squat')">Front Squat</span>
                                </td>
                                <td class="px-1 text-xs">
                                    <div class="font-bold">3 x 8</div>
                                    <div class="text-gray-500 text-[10px]">RPE 8 / Rest: 2-3m</div>
                                </td>
                                <td class="px-1 py-2">
                                    <div class="flex gap-1 mb-1">
                                        <input type="number" class="log-weight w-12 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="Kg">
                                        <input type="number" class="log-reps w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" value="8">
                                        <input type="number" class="log-rpe w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="RPE">
                                        <button onclick="saveSet(this)" class="bg-blue-600 text-white rounded px-2 shadow hover:bg-blue-700">‚úì</button>
                                    </div>
                                    <div class="text-[10px] text-gray-400">Today: <span class="set-count font-bold">0</span> sets</div>
                                </td>
                            </tr>
                            <!-- T3 -->
                            <tr class="exercise-row" data-id="d-4" data-name="Split Squat">
                                <td class="py-3 px-1"><span class="exercise-name-span clickable-exercise cursor-pointer hover:underline" onclick="showGraph('Split Squat')">Split Squat</span></td>
                                <td class="px-1 text-xs">
                                    3x10 (RPE8)
                                    <div class="text-gray-500 text-[10px]">Rest: 2m</div>
                                </td>
                                <td class="px-1 py-2">
                                    <div class="flex gap-1 mb-1">
                                        <input type="number" class="log-weight w-12 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="Kg">
                                        <input type="number" class="log-reps w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" value="10">
                                        <input type="number" class="log-rpe w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="RPE">
                                        <button onclick="saveSet(this)" class="bg-blue-600 text-white rounded px-2 shadow hover:bg-blue-700">‚úì</button>
                                    </div>
                                    <div class="text-[10px] text-gray-400">Today: <span class="set-count font-bold">0</span> sets</div>
                                </td>
                            </tr>
                            <tr class="exercise-row" data-id="d-5" data-name="Calf Raise">
                                <td class="py-3 px-1"><span class="exercise-name-span clickable-exercise cursor-pointer hover:underline" onclick="showGraph('Calf Raise')">Calf Raise</span></td>
                                <td class="px-1 text-xs">
                                    3x15 (RPE10)
                                    <div class="text-gray-500 text-[10px]">Rest: 60s</div>
                                </td>
                                <td class="px-1 py-2">
                                    <div class="flex gap-1 mb-1">
                                        <input type="number" class="log-weight w-12 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="Kg">
                                        <input type="number" class="log-reps w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" value="15">
                                        <input type="number" class="log-rpe w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="RPE">
                                        <button onclick="saveSet(this)" class="bg-blue-600 text-white rounded px-2 shadow hover:bg-blue-700">‚úì</button>
                                    </div>
                                    <div class="text-[10px] text-gray-400">Today: <span class="set-count font-bold">0</span> sets</div>
                                </td>
                            </tr>
                            <tr class="exercise-row" data-id="d-6" data-name="Hanging Leg Raises">
                                <td class="py-3 px-1"><span class="exercise-name-span clickable-exercise cursor-pointer hover:underline" onclick="showGraph('Hanging Leg Raises')">Hanging Leg Raises</span></td>
                                <td class="px-1 text-xs">
                                    3 Sets (RPE9)
                                    <div class="text-gray-500 text-[10px]">Rest: 60s</div>
                                </td>
                                <td class="px-1 py-2">
                                    <div class="flex gap-1 mb-1">
                                        <input type="number" class="log-weight w-12 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="Kg">
                                        <input type="number" class="log-reps w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center">
                                        <input type="number" class="log-rpe w-10 bg-gray-50 border border-gray-300 rounded px-1 text-center" placeholder="RPE">
                                        <button onclick="saveSet(this)" class="bg-blue-600 text-white rounded px-2 shadow hover:bg-blue-700">‚úì</button>
                                    </div>
                                    <div class="text-[10px] text-gray-400">Today: <span class="set-count font-bold">0</span> sets</div>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

        </div>
    </div>

    <!-- GRAPH MODAL -->
    <div id="graphModal" class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center p-4 z-50" onclick="closeGraph()">
        <div class="bg-white rounded-lg p-6 w-full max-w-2xl" onclick="event.stopPropagation()">
            <div class="flex justify-between items-center mb-4">
                <h3 id="graphTitle" class="text-xl font-bold text-gray-800">Progress</h3>
                <button onclick="closeGraph()" class="text-gray-500 hover:text-red-500 font-bold text-xl">&times;</button>
            </div>
            <div class="w-full h-64 md:h-80">
                <canvas id="progressChart"></canvas>
            </div>
            <p class="text-xs text-center text-gray-500 mt-2">Charts show estimated 1RM (Weight * (1 + Reps/30)) to standardize performance.</p>
        </div>
    </div>

    <!-- TOAST NOTIFICATION -->
    <div id="toast" class="fixed bottom-4 right-4 bg-gray-800 text-white px-6 py-3 rounded shadow-lg transform translate-y-20 opacity-0 transition-all duration-300">
        Message
    </div>

</body>
</html>